<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VBet</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/settings-popup.css">
    <link rel="stylesheet" href="css/team-bets.css">
    <link rel="stylesheet" href="css/adapt/settings-popup.css">
    <link rel="stylesheet" href="css/adapt/menu.css">
    <link rel="stylesheet" href="css/adapt/team-bets.css">
    <link rel="shortcut icon" href="img/logo.svg" type="image/x-icon">
    <script type="text/javascript" src="/jquery/jquery-3.7.1.js"></script>
</head>

<body>
<header class="header">
    <div class="container">
        <div class="container__header">
            <div class="header__logo">
                <a href="#" class="header__logo-link"> <img src="img/logo.svg" alt="logo" class="header__logo-picture">
                </a>
            </div>
            <div class="header__name">
                <div class="header__name_first">VB</div>
                <div class="header__name_last">et</div>
            </div>
            <div class="header__back">
                <a href="team-matches.html"><img src="img/Back.svg" alt="Back" class="header__back-img"></a>
            </div>
        </div>
    </div>
</header>
<section class="matches_bet">
    <div class="match">
        <div class="container">
            <div class="match__container">
                <div class="match__filling">
                    <div class="match__first__team match__team">
                        <div class="match__team-picture"><img src="img/liverpool.svg" alt="Ливерпуль"
                                                              class="match__team-picture"></div>
                        <div class="match__team-name">Ливерпуль</div>
                    </div>
                    <div class="match__time">
                        <div class="bet__match__time-value">19:00</div>
                        <div class="bet__match__date">29.02.2024</div>
                    </div>
                    <div class="match__second__team match__team">
                        <div class="match__team-picture"><img src="img/arsenal.svg" alt="Арсенал"
                                                              class="match__team-picture"></div>
                        <div class="match__team-name">Арсенал</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="matches_bets">
    <div class="bets">
        <div class="matches__bet__title">
            <div class="container">
                <div class="bet__container__title">
                    <div class="bet__container__title-name">Ставки</div>
                </div>
            </div>
        </div>
        <div class="bet">
            <div class="bet__title">
                <div class="container">
                    <div class="bet__container__title">
                        <div class="bet__title-name">Исход</div>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">п1</div>
                            <div class="bet__coefficient">2.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">н</div>
                            <div class="bet__coefficient">3.75</div>
                        </a>
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">п2</div>
                            <div class="bet__coefficient">5.21</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bet">
            <div class="bet__title">
                <div class="container">
                    <div class="bet__container__title">
                        <div class="bet__title-name">Двойной шанс</div>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">п1</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">н</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                        <a href="#popup" class="bet__value-item three_bet__value-item">
                            <div class="bet__name">п2</div>
                            <div class="bet__coefficient">2.21</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bet">
            <div class="bet__title">
                <div class="container">
                    <div class="bet__container__title">
                        <div class="bet__title-name">Тотал</div>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 0,5</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 0,5</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 1</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 1</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 1,5</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 1,5</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 2</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 2</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling"><a href="#popup">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 2,5</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 2,5</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </a>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 3</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 3</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">больше 3,5</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 3,5</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a class="bet__value-item two_bet__value-item" href="#popup">
                            <div class="bet__name">больше 4</div>
                            <div class="bet__coefficient">1.49</div>
                        </a>
                        <a href="#popup" class="bet__value-item two_bet__value-item">
                            <div class="bet__name">меньше 4</div>
                            <div class="bet__coefficient">1.75</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bet">
            <div class="bet__title">
                <div class="container">
                    <div class="bet__container__title">
                        <div class="bet__title-name">Обе забьют</div>
                    </div>
                </div>
            </div>
            <div class="bet__filling">
                <div class="container">
                    <div class="bet__value">
                        <a href="#popup" class="bet__value-item one_bet__value-item">
                            <div class="bet__name">Две команды забьют</div>
                            <div class="bet__coefficient">2.49</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="popup" class="overlay">
        <div class="container">
            <div class="popup">
                <div class="popup__header">
                    <div class="popup__container">
                        <div class="popup__container__header">
                            <div class="popup__balance">
                                <div id="popupBalance" class="popup__balance-size">121.32</div>
                                <div class="popup__balance-rubles">p</div>
                            </div>
                            <div class="popup__close">
                                <a href="#"><img src="img/Close.svg" alt="Close" class="popup__close-img"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="popup__match">
                    <div class="popup__container">
                        <div class="popup__container__match">
                            <div class="popup__teams">
                                <div class="popup__team">Ливерпуль</div>
                                <div class="popup__team">-</div>
                                <div class="popup__team">Арсенал</div>
                            </div>
                            <div class="popup__date">29.02.2024</div>
                        </div>
                    </div>
                </div>
                <div class="popup__bet">
                    <div class="popup__container">
                        <div class="popup__container__bet">
                            <div class="popup__bet__name">
                                <div id="betTitleName" class="popup__bet-title">Исход</div>
                                <div id="betCoefficient" class="popup__bet-coefficient">2.42</div>
                            </div>
                            <div id="betName" class="popup__bet-description">п1</div>
                        </div>
                    </div>
                </div>
                <div class="popup__bet__size">
                    <div class="popup__container">
                        <div class="popup__container__bet__size">
                            <div class="popup__bet__size-item">
                                <div class="popup__bet__size-title">Размер ставки</div>
                                <div class="popup__bet__size-input">
                                    <input id="betSize" type="number" value="0">
                                </div>
                            </div>
                            <div class="popup__bet__size-item">
                                <div class="popup__bet__size-title">Выигрыш</div>
                                <div class="popup__bet__size-input popup__bet__size-noninput">
                                    <input id="betWin" type="number" value="0" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="popup__button">
                    <div class="popup__container">
                        <div class="popup__container__button">
                            <input id="popupButton" type="button" value="поставить">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<footer class="footer">
    <div class="container">
        <div class="container__footer">
            <ul class="footer__menu">
                <li class="footer__menu-item">
                    <a href="main.html"> <img src="img/MenuItemHome.svg" alt="Home"
                                              class="footer__menu-picture footer__menu-active-item"> </a>
                </li>
                <li class="footer__menu-item">
                    <a href="balance.html"> <img src="img/MenuItemBalance.svg" alt="Balance"
                                                 class="footer__menu-picture"> </a>
                </li>
                <li class="footer__menu-item">
                    <a href="profile.html"> <img src="img/MenuItemProfile.svg" alt="Profile"
                                                 class="footer__menu-picture"> </a>
                </li>
                <li class="footer__menu-item">
                    <a href="bets.html"> <img src="img/MenuItemBets.svg" alt="Bets" class="footer__menu-picture"> </a>
                </li>
                <li class="footer__menu-item">
                    <a href="#"> <img src="img/MenuItemLogout.svg" alt="Logout" class="footer__menu-picture"> </a>
                </li>
            </ul>
        </div>
    </div>
</footer>
</body>

<script>
    $(".bet__value-item").on('click', function() {
        var betCoefficient = $(this).find(".bet__coefficient").text();
        var betName = $(this).find(".bet__name").text();
        var betTitleName = $(this).parent().parent().parent().parent()
            .find(".bet__title>.container>.bet__container__title>.bet__title-name").text();

        $("#betCoefficient").text(betCoefficient);
        $("#betName").text(betName);
        $("#betTitleName").text(betTitleName);
    });

    let lastBetSize = 0;

    $("#betSize").focusout(function () {
        var popupBalance = Number($("#popupBalance").text()) + lastBetSize;
        var betSize = Number($("#betSize").val());
        var betCoefficient = $("#betCoefficient").text();

        if(betSize <= popupBalance){
            popupBalance -= betSize;
        } else {
            betSize = popupBalance;
            popupBalance = 0;
        }

        var betWin = betCoefficient * betSize;
        $("#popupBalance").text(popupBalance.toFixed(2));
        $("#betSize").val(betSize.toFixed(2));
        $("#betWin").val(betWin.toFixed(2));
        lastBetSize = betSize;
        if(betSize != 0) {
            $('#betSize').parent().css("border-color", "rgba(255,255,255,.5)");
        }
    });

    $('#popupButton').click(function(){
        var betSize = Number($("#betSize").val());
        if(betSize == 0){
            $('#betSize').focus();
            $('#betSize').parent().css("border-color", "rgb(247 93 93)");
        }
    });
</script>
</html>
