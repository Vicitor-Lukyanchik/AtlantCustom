<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <link rel="stylesheet" href="styles/table.css">
    <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
</head>
<body>

<header class="header">
    <div class="title" style="background-image: url(images/logo.png);">
    </div>
    <div class="log_out">
        <a class="tag tag_out" href="/login">Выйти</a>
    </div>
    <div class="log_search">
        <a class="tag tag_back" id="back" th:href="@{/search(token=${token})}">Назад</a>
    </div>
</header>

<div class="container">
    <form>
        <div class="tbl-header">
            <table border="1">
                <thead>
                <tr>
                    <th th:text="country"/>
                    <th th:text="city"/>
                    <th th:text="firm"/>
                </tr>
                </thead>
            </table>
        </div>
        <div class="tbl-content">
            <table class="table">
                <tbody>
                <tr th:each="country : ${countries}">

                    <td th:text="${country.getName()}">
                    </td>

                    <td>
                        <div class="outer" th:each="city : ${country.getCities()}">
                            <p th:text="${city.getName()}"></p>

                            <div th:if="${city.getFirms().size()>1}">
                                <div th:each="i : ${#numbers.sequence( 1, (city.getFirms().size()-1)/1)}">
                                    <div class="skip"></div>
                                </div>
                            </div>
                        </div>
                    </td>

                    <td>
                        <div class="outer" th:each="city : ${country.getCities()}" >
                            <div class="inner" th:each="firm : ${city.getFirms()}">
                                <p th:text="${firm.getName()}"></p>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </form>
</div>

<script>
    document.onkeydown = function(evt) {
        evt = evt || window.event;
        if (evt.keyCode == 27) {
            document.getElementById('back').click();
        }
    };
</script>

</body>
</html>